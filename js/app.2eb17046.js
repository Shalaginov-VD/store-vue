(()=>{"use strict";var t={5917:(t,e,r)=>{r(3792),r(3362),r(9085),r(9391);var n=r(5130),o=r(6768);function c(t,e){var r=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(r)}var a=r(1241);const i={},u=(0,a.A)(i,[["render",c]]),s=u;var l=r(1387),d=r(4232);const p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACoklEQVRoBe1Z3VHEIBC2hCvhnhPgGA1JHulAO/BKsAPtQDvQDrSDK+FKuBIsQWejOMvmh4QsMTp3MxlIgN1vl/1Y4C4uzr+VeEAp8yik+Qg90G8lkH0YIeC4XWu79Uev4E0q845BDtWz7HK/Asg+BK2vboQwR6XKE32kKnzjhHnyR6/8TcrLPZmRw8oh+/B0bbfYAAg3v8cfeKMcWSWRh/woZHHAs7BKIg8aIK6esAHiHxA5mPQ8g0ckyTH9mxVRlfdDzu5so0Qeoyxln06QoY+UyCkBhmSHsHa2UyKHlKRqj17GxS8RudklYA4JE5dIfysjszmOEjl6KjsDtP8jDV0pq+v+3oEWSuQlMjLVmWVGB2D2N1NvpM7IWte8+zC2eOz3kdeidW291SyWwE7q0kRWqnwgBsw7iyxNZCmLV2yA0vWtc2Z0SUmVkshiVx6xARBS0cDdwKWIbK3dYPBQdxhmlUsRmRI4F+VxFnA3eCki53lxh2cgV9WbwzCrXIrIlMBg0CzgeHCbyAzkQgq0tptclSc8AywEdjookUGRlNVrvqueOR56FwUOc7pZSkow7KkUdaXqBxbgWEgrS+I9O2OdbfXB4F09k2ZPY5VrBiCMwEna3mycvmQlhBScnGCJ5XgaeUsAT+aRs+AJHoATEoTPrJMS0gebQwhD1nUfyf+pfp+WvDtTIc0Bvv90mljZ6eoZLwKwQMyRN6gewGJlqB517dH3Px0YATvTQTBTGyFcEODWPenUcOraOmP57Gfv1mUTSVxTrz7oBlHt/H0Q5IOpTh7sn2IG6AYRzwDLUZJa1LWha5SKIooDrYPS96wCB6hulvevaff/uRGiOMD3GAXAg1yVL9jzzSoUKW80Bggn1jxQ2y3IS54HRlt47viPPfAJkGtYpK5y34YAAAAASUVORK5CYII=";var g={class:"content"},v={class:"row"},f={class:"cart-row"},h={class:"filters"},m=["value"],k={key:0,class:"loading-title"},C={class:"product-grid"},P={key:1,class:"pagination"},y=["disabled"],A={class:"page-nubmers"},b=["onClick"],I=["disabled"];function L(t,e,r,c,a,i){var u=(0,o.g2)("router-link"),s=(0,o.g2)("ProductCard"),l=(0,o.g2)("ProductModal");return(0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("div",v,[e[5]||(e[5]=(0,o.Lk)("h1",null,"Товары",-1)),(0,o.Lk)("div",f,[(0,o.bF)(u,{to:"/cart"},{default:(0,o.k6)((function(){return e[4]||(e[4]=[(0,o.Lk)("img",{src:p,alt:"Cart logo"},null,-1)])})),_:1})])]),(0,o.Lk)("div",h,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.selectedCategory=t}),onChange:e[1]||(e[1]=function(){return i.filterProducts&&i.filterProducts.apply(i,arguments)})},[e[6]||(e[6]=(0,o.Lk)("option",{value:""},"Все категории",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.categories,(function(t){return(0,o.uX)(),(0,o.CE)("option",{key:t,value:t},(0,d.v_)(t),9,m)})),128))],544),[[n.u1,a.selectedCategory]])]),a.loading?((0,o.uX)(),(0,o.CE)("div",k,"Загрузка...")):(0,o.Q3)("",!0),(0,o.Lk)("div",C,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedProducts,(function(t){return(0,o.uX)(),(0,o.Wv)(s,{key:t.id,product:t,onClick:function(e){return i.openModal(t)}},null,8,["product","onClick"])})),128))]),a.loading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",P,[(0,o.Lk)("button",{onClick:e[2]||(e[2]=function(){return i.prevPage&&i.prevPage.apply(i,arguments)}),disabled:1===a.currentPage},"←",8,y),(0,o.Lk)("div",A,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPages,(function(t){return(0,o.uX)(),(0,o.CE)("button",{key:t,onClick:function(e){return i.goToPage(t)},class:(0,d.C4)({active:a.currentPage===t})},(0,d.v_)(t),11,b)})),128))]),(0,o.Lk)("button",{onClick:e[3]||(e[3]=function(){return i.nextPage&&i.nextPage.apply(i,arguments)}),disabled:t.cuurentPage===i.totalPages},"→",8,I)])),a.selectedProduct?((0,o.uX)(),(0,o.Wv)(l,{key:2,product:a.selectedProduct,isVisible:!!a.selectedProduct,onClose:i.closeModal},null,8,["product","isVisible","onClose"])):(0,o.Q3)("",!0)])}var w=r(4048),E=r(9258),O=r(388),S=(r(2008),r(2062),r(4782),r(6099),r(1415),r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698),r(7764),r(8992),r(4520),r(1454),r(2953),{key:0,class:"notification"}),T=["src"];function x(t,e,r,c,a,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[a.message?((0,o.uX)(),(0,o.CE)("div",S,(0,d.v_)(a.message),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",{class:"product-card",onClick:e[1]||(e[1]=function(){return i.handleClick&&i.handleClick.apply(i,arguments)})},[(0,o.Lk)("img",{class:"product-img",src:r.product.image,alt:"Product image"},null,8,T),(0,o.Lk)("h2",null,(0,d.v_)(r.product.title),1),(0,o.Lk)("p",null,"Цена: "+(0,d.v_)(i.convertToRub(r.product.price))+" ₽",1),(0,o.Lk)("p",null,"Категория: "+(0,d.v_)(r.product.category),1),(0,o.Lk)("p",null,"Оценка: "+(0,d.v_)(r.product.rating.rate),1),(0,o.Lk)("button",{onClick:e[0]||(e[0]=(0,n.D$)((function(){return i.addToCart&&i.addToCart.apply(i,arguments)}),["stop"]))},"Добавить в корзину")])],64)}r(8980),r(4114),r(739),r(3110),r(9432),r(6031);const R={props:{product:Object},data:function(){return{message:""}},methods:{convertToRub:function(t){var e=100;return t*e},addToCart:function(){var t=this,e={id:this.product.id,title:this.product.title,price:this.product.price,quantity:1},r=JSON.parse(localStorage.getItem("cart"))||[],n=r.findIndex((function(t){return t.id===e.id}));n>-1?r[n].quantity+=1:r.push(e),localStorage.setItem("cart",JSON.stringify(r)),this.message="Товар добавлен в корзину",setTimeout((function(){t.message=""}),3e3)},handleClick:function(){this.$emit("click")}}},X=(0,a.A)(R,[["render",x]]),B=X;r(2675),r(9463);var K={key:0,class:"modal"},Q={class:"modal-content"},V={key:0,class:"notification"},W=["src"];function M(t,e,r,c,a,i){return r.isVisible?((0,o.uX)(),(0,o.CE)("div",K,[(0,o.Lk)("div",Q,[a.message?((0,o.uX)(),(0,o.CE)("div",V,(0,d.v_)(a.message),1)):(0,o.Q3)("",!0),(0,o.Lk)("span",{class:"close",onClick:e[0]||(e[0]=function(){return i.closeModal&&i.closeModal.apply(i,arguments)})},"×"),(0,o.Lk)("img",{class:"product-img",src:r.product.image,alt:"Product image"},null,8,W),(0,o.Lk)("h2",null,(0,d.v_)(r.product.title),1),(0,o.Lk)("p",null,"Цена: "+(0,d.v_)(i.convertToRub(r.product.price))+" ₽",1),(0,o.Lk)("p",null,"Категория: "+(0,d.v_)(r.product.category),1),(0,o.Lk)("p",null,"Описание: "+(0,d.v_)(r.product.description),1),(0,o.Lk)("p",null,"Оценка: "+(0,d.v_)(r.product.rating.rate)+" ("+(0,d.v_)(r.product.rating.count)+" отзывов)",1),(0,o.Lk)("button",{onClick:e[1]||(e[1]=(0,n.D$)((function(){return i.addToCart&&i.addToCart.apply(i,arguments)}),["stop"]))},"Добавить в корзину")])])):(0,o.Q3)("",!0)}const _={props:{product:Object,isVisible:Boolean},data:function(){return{message:""}},methods:{closeModal:function(){this.$emit("close")},convertToRub:function(t){var e=100;return t*e},addToCart:function(){var t=this,e={id:this.product.id,title:this.product.title,price:this.product.price,quantity:1},r=JSON.parse(localStorage.getItem("cart"))||[],n=r.findIndex((function(t){return t.id===e.id}));n>-1?r[n].quantity+=1:r.push(e),localStorage.setItem("cart",JSON.stringify(r)),this.message="Товар добавлен в корзину",setTimeout((function(){t.message=""}),3e3)}}},j=(0,a.A)(_,[["render",M]]),H=j,D={name:"HomeView",components:{ProductCard:B,ProductModal:H},data:function(){return{loading:!0,products:[],selectedCategory:"",categories:[],selectedProduct:null,currentPage:1,itemsPerPage:10}},computed:{filteredProducts:function(){var t=this;return this.selectedCategory?this.products.filter((function(e){return e.category===t.selectedCategory})):this.products},paginatedProducts:function(){var t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredProducts.slice(t,e)},totalPages:function(){return Math.ceil(this.filteredProducts.length/this.itemsPerPage)}},methods:{fetchProducts:function(){var t=this;return(0,O.A)((0,w.A)().mark((function e(){var r;return(0,w.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,fetch("https://fakestoreapi.com/products");case 3:return r=e.sent,e.next=6,r.json();case 6:t.products=e.sent,t.categories=(0,E.A)(new Set(t.products.map((function(t){return t.category})))),t.currentPage=1,t.loading=!1;case 10:case"end":return e.stop()}}),e)})))()},filterProducts:function(){this.currentPage=1},openModal:function(t){this.selectedProduct=t},closeModal:function(){this.selectedProduct=null},nextPage:function(){this.currentPage<this.totalPages&&(this.currentPage+=1)},prevPage:function(){this.currentPage>1&&(this.currentPage-=1)},goToPage:function(t){this.currentPage=t}},mounted:function(){this.fetchProducts()}},U=(0,a.A)(D,[["render",L]]),F=U;r(9868);var q={class:"cart"},z={key:0,class:"cart-empty"},G={key:1,class:"cart-load"},J=["onClick"];function Y(t,e,r,n,c,a){var i=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",q,[e[1]||(e[1]=(0,o.Lk)("h1",null,"Корзина",-1)),(0,o.bF)(i,{to:"/",class:"back-button"},{default:(0,o.k6)((function(){return e[0]||(e[0]=[(0,o.eW)("Назад")])})),_:1}),0===c.cartItems.length?((0,o.uX)(),(0,o.CE)("div",z,"Корзина пуста")):((0,o.uX)(),(0,o.CE)("div",G,[(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(c.cartItems,(function(t){return(0,o.uX)(),(0,o.CE)("li",{key:t.id},[(0,o.eW)((0,d.v_)(t.title)+" - "+(0,d.v_)(t.quantity)+" шт. - "+(0,d.v_)(a.convertToRub(t.price*t.quantity))+" ₽ ",1),(0,o.Lk)("button",{onClick:function(e){return a.removeFromCart(t.id)}},"Удалить",8,J)])})),128))]),(0,o.Lk)("h2",null,"Общая стоимость: "+(0,d.v_)(a.convertToRub(a.totalPrice).toFixed(2))+" ₽",1)]))])}r(2712),r(8872);const N={data:function(){return{cartItems:[]}},computed:{totalPrice:function(){return this.cartItems.reduce((function(t,e){return t+e.price*e.quantity}),0)}},methods:{convertToRub:function(t){var e=100;return t*e},loadCart:function(){var t=JSON.parse(localStorage.getItem("cart"))||[];this.cartItems=t},removeFromCart:function(t){this.cartItems=this.cartItems.filter((function(e){return e.id!==t})),localStorage.setItem("cart",JSON.stringify(this.cartItems))}},mounted:function(){this.loadCart()}},Z=(0,a.A)(N,[["render",Y]]),$=Z;var tt=[{path:"/",name:"home",component:F},{path:"/cart",name:"cart",component:$}],et=(0,l.aE)({history:(0,l.LA)("/store-vue/"),routes:tt});const rt=et;(0,n.Ef)(s).use(rt).mount("#app")}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var c=e[n]={exports:{}};return t[n].call(c.exports,c,c.exports,r),c.exports}r.m=t,(()=>{var t=[];r.O=(e,n,o,c)=>{if(!n){var a=1/0;for(l=0;l<t.length;l++){for(var[n,o,c]=t[l],i=!0,u=0;u<n.length;u++)(!1&c||a>=c)&&Object.keys(r.O).every((t=>r.O[t](n[u])))?n.splice(u--,1):(i=!1,c<a&&(a=c));if(i){t.splice(l--,1);var s=o();void 0!==s&&(e=s)}}return e}c=c||0;for(var l=t.length;l>0&&t[l-1][2]>c;l--)t[l]=t[l-1];t[l]=[n,o,c]}})(),(()=>{r.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return r.d(e,{a:e}),e}})(),(()=>{r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{var t={524:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var o,c,[a,i,u]=n,s=0;if(a.some((e=>0!==t[e]))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(u)var l=u(r)}for(e&&e(n);s<a.length;s++)c=a[s],r.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return r.O(l)},n=self["webpackChunkweb"]=self["webpackChunkweb"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var n=r.O(void 0,[504],(()=>r(5917)));n=r.O(n)})();
//# sourceMappingURL=app.2eb17046.js.map